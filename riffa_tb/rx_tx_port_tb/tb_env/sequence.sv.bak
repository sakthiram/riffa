`include "defines.svh"

class wr_transaction extends uvm_sequence_item;

  `uvm_object_utils(wr_transaction)

  rand bit [`DATA_WORD_WIDTH:0] data_en;
  rand bit [`DATA_WIDTH-1:0] data; 

  //rand bit data_done; //TODO: Redundant for bits>=128
  //constraint c_data_done { soft data_done == 1; } // default value

  function new (string name = "");
    super.new(name);
  endfunction

endclass: wr_transaction

class wr_sequence extends uvm_sequence#(wr_transaction);

  `uvm_object_utils(wr_sequence)

  wr_transaction wr_req;

  function new (string name = "");
    super.new(name);
  endfunction

  task body;
    repeat(8) begin
      wr_req = wr_transaction::type_id::create("wr_req");
      start_item(wr_req);

      if (!wr_req.randomize()) begin
        `uvm_error("MY_SEQUENCE", "Randomize failed.");
      end

      // If using ModelSim, which does not support randomize(),
      // we must randomize item using traditional methods, like
      // wr_req.cmd = $urandom;
      // wr_req.addr = $urandom_range(0, 255);
      // wr_req.data = $urandom_range(0, 255);

      finish_item(wr_req);
    end
  endtask: body

endclass: wr_sequence

